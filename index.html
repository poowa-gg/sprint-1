<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Climatovate - Climate Intelligence Platform</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; margin: 0; padding: 0; }
    @keyframes spin { to { transform: rotate(360deg); } }
    .animate-spin { animation: spin 1s linear infinite; }
    @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: .5; } }
    .animate-pulse { animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite; }
  </style>
</head>
<body>
  <div id="root"></div>
  <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

  <script type="text/babel">
    const { useState, useEffect, Suspense, lazy } = React;

    // SVG Icon Components
    const CloudIcon = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2">
        <path strokeLinecap="round" strokeLinejoin="round" d="M6.341 17.06a4 4 0 1 1 5.178-5.178A3 3 0 1 1 17 17H6.34z"/>
      </svg>
    );
    const SunIcon = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2">
        <circle cx="12" cy="12" r="4"/><path d="M12 2v2m0 16v2M4.93 4.93l1.41 1.41m11.32 11.32l1.41 1.41M2 12h2m16 0h2M6.34 17.66l-1.41 1.41M19.07 4.93l-1.41 1.41"/>
      </svg>
    );
    const WindIcon = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2">
        <path strokeLinecap="round" strokeLinejoin="round" d="M17.7 7.7A2.5 2.5 0 1 1 19 12H2m7.5-7A2.5 2.5 0 1 1 11 8H2m10.5 11a2.5 2.5 0 1 0 2-4H2"/>
      </svg>
    );
    const DropletsIcon = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2">
        <path strokeLinecap="round" strokeLinejoin="round" d="M12 22a7 7 0 0 0 7-7c0-2-1-3.9-3-5.5s-3.5-4-4-6.5c-.5 2.5-2 4.9-4 6.5S5 13 5 15a7 7 0 0 0 7 7z"/>
      </svg>
    );
    const MapPinIcon = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2">
        <path strokeLinecap="round" strokeLinejoin="round" d="M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z"/><circle cx="12" cy="10" r="3"/>
      </svg>
    );
    const LoaderIcon = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2">
        <path d="M21 12a9 9 0 1 1-6.219-8.56"/>
      </svg>
    );
    const CloudRainIcon = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2">
        <path strokeLinecap="round" strokeLinejoin="round" d="M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973m-7 2.027v2m0 4v2m-4-4v2m8-2v2"/>
      </svg>
    );
    const UserIcon = ({ className }) => (
      <svg className={className} fill="none" stroke="currentColor" viewBox="0 0 24 24" strokeWidth="2">
        <path strokeLinecap="round" strokeLinejoin="round" d="M16 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0zM12 14a7 7 0 0 0-7 7h14a7 7 0 0 0-7-7z"/>
      </svg>
    );

    const mockCurrentWeather = { temperature: 24, windSpeed: 12, soilMoisture: 68 };
    const mockForecast = [
      { day: 'Mon', temp: 26, condition: 'sunny', precipitation: 10 },
      { day: 'Tue', temp: 24, condition: 'cloudy', precipitation: 30 },
      { day: 'Wed', temp: 22, condition: 'rainy', precipitation: 70 },
      { day: 'Thu', temp: 23, condition: 'cloudy', precipitation: 40 },
      { day: 'Fri', temp: 25, condition: 'sunny', precipitation: 5 },
      { day: 'Sat', temp: 27, condition: 'sunny', precipitation: 0 },
      { day: 'Sun', temp: 26, condition: 'cloudy', precipitation: 20 }
    ];

    const GeospatialMap = () => (
      <div className="bg-gradient-to-br from-green-50 via-emerald-50 to-blue-50 rounded-xl p-8 h-96 flex items-center justify-center border-2 border-green-200 shadow-lg">
        <div className="text-center">
          <div className="w-20 h-20 bg-gradient-to-br from-green-500 to-emerald-600 rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg">
            <MapPinIcon className="w-10 h-10 text-white" />
          </div>
          <h3 className="text-2xl font-bold text-gray-800 mb-2">Interactive Geospatial Map</h3>
          <p className="text-gray-600 mb-4">Climate data visualization and field mapping</p>
          <div className="inline-flex items-center gap-2 bg-white px-4 py-2 rounded-full shadow-sm">
            <div className="w-2 h-2 bg-green-500 rounded-full animate-pulse"></div>
            <span className="text-sm text-gray-700">Map Ready</span>
          </div>
        </div>
      </div>
    );

    const LazyGeospatialMap = lazy(() => Promise.resolve({ default: GeospatialMap }));

    const WeatherIcon = ({ condition }) => {
      const cls = "w-8 h-8";
      if (condition === 'sunny') return <SunIcon className={`${cls} text-yellow-500`} />;
      if (condition === 'rainy') return <CloudRainIcon className={`${cls} text-blue-500`} />;
      if (condition === 'cloudy') return <CloudIcon className={`${cls} text-gray-500`} />;
      return <CloudIcon className={`${cls} text-gray-400`} />;
    };

    const CurrentWeatherWidget = () => (
      <div className="bg-white rounded-xl shadow-lg p-6 border border-gray-100">
        <h3 className="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
          <CloudIcon className="w-5 h-5 text-blue-500" />Current Conditions
        </h3>
        <div className="space-y-4">
          <div className="flex items-center justify-between p-4 bg-gradient-to-r from-orange-50 to-red-50 rounded-lg border border-orange-100">
            <div className="flex items-center gap-3">
              <div className="p-2 bg-white rounded-lg shadow-sm"><SunIcon className="w-6 h-6 text-orange-500" /></div>
              <span className="text-gray-700 font-medium">Temperature</span>
            </div>
            <span className="text-3xl font-bold text-orange-600">{mockCurrentWeather.temperature}°C</span>
          </div>
          <div className="flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-cyan-50 rounded-lg border border-blue-100">
            <div className="flex items-center gap-3">
              <div className="p-2 bg-white rounded-lg shadow-sm"><WindIcon className="w-6 h-6 text-blue-500" /></div>
              <span className="text-gray-700 font-medium">Wind Speed</span>
            </div>
            <span className="text-3xl font-bold text-blue-600">{mockCurrentWeather.windSpeed} km/h</span>
          </div>
          <div className="flex items-center justify-between p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border border-green-100">
            <div className="flex items-center gap-3">
              <div className="p-2 bg-white rounded-lg shadow-sm"><DropletsIcon className="w-6 h-6 text-green-500" /></div>
              <span className="text-gray-700 font-medium">Soil Moisture</span>
            </div>
            <span className="text-3xl font-bold text-green-600">{mockCurrentWeather.soilMoisture}%</span>
          </div>
        </div>
      </div>
    );

    const ForecastWidget = () => (
      <div className="bg-white rounded-xl shadow-lg p-6 border border-gray-100">
        <h3 className="text-lg font-semibold text-gray-800 mb-4 flex items-center gap-2">
          <SunIcon className="w-5 h-5 text-yellow-500" />7-Day Forecast
        </h3>
        <div className="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-7 gap-3">
          {mockForecast.map((day, i) => (
            <div key={i} className="bg-gradient-to-br from-blue-50 to-indigo-50 rounded-lg p-4 text-center border border-blue-100 hover:shadow-md transition-all">
              <p className="text-sm font-semibold text-gray-700 mb-3">{day.day}</p>
              <div className="flex justify-center mb-3"><WeatherIcon condition={day.condition} /></div>
              <p className="text-2xl font-bold text-gray-800 mb-2">{day.temp}°</p>
              <div className="flex items-center justify-center gap-1">
                <DropletsIcon className="w-3 h-3 text-blue-500" />
                <p className="text-xs text-blue-600 font-medium">{day.precipitation}%</p>
              </div>
            </div>
          ))}
        </div>
      </div>
    );

    const LoginScreen = ({ onSignIn, loading }) => {
      const [email, setEmail] = useState('');
      const [password, setPassword] = useState('');
      const handleSubmit = (e) => { e.preventDefault(); if (email && password) onSignIn(email); };

      return (
        <div className="min-h-screen bg-gradient-to-br from-green-400 via-blue-500 to-purple-600 flex items-center justify-center p-4">
          <div className="bg-white rounded-2xl shadow-2xl p-8 w-full max-w-md">
            <div className="text-center mb-8">
              <div className="w-20 h-20 bg-gradient-to-br from-green-500 to-blue-500 rounded-full mx-auto mb-4 flex items-center justify-center shadow-lg">
                <CloudIcon className="w-10 h-10 text-white" />
              </div>
              <h1 className="text-4xl font-bold text-gray-800 mb-2">Climatovate</h1>
              <p className="text-gray-600 text-lg">Climate Intelligence Platform</p>
            </div>
            <form onSubmit={handleSubmit} className="space-y-4 mb-6">
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">Email</label>
                <input type="email" value={email} onChange={(e) => setEmail(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="your@email.com" required />
              </div>
              <div>
                <label className="block text-sm font-medium text-gray-700 mb-2">Password</label>
                <input type="password" value={password} onChange={(e) => setPassword(e.target.value)} className="w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none" placeholder="••••••••" required />
              </div>
              <button type="submit" disabled={loading} className="w-full bg-gradient-to-r from-green-500 to-blue-500 text-white font-semibold py-4 px-6 rounded-xl hover:from-green-600 hover:to-blue-600 transition-all shadow-lg disabled:opacity-50 flex items-center justify-center gap-2 text-lg">
                {loading ? <><LoaderIcon className="w-6 h-6 animate-spin" />Signing In...</> : 'Sign In to Dashboard'}
              </button>
            </form>
            <div className="bg-green-50 border border-green-200 rounded-lg p-3">
              <p className="text-sm text-green-800 text-center"><span className="font-semibold">Sprint 1 MVP</span> - Authentication & Dashboard</p>
            </div>
          </div>
        </div>
      );
    };

    const Dashboard = ({ userId, onSignOut }) => (
      <div className="min-h-screen bg-gray-50">
        <header className="bg-white shadow-sm border-b border-gray-200 sticky top-0 z-50">
          <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
            <div className="flex items-center justify-between flex-wrap gap-4">
              <div className="flex items-center gap-3">
                <div className="w-12 h-12 bg-gradient-to-br from-green-500 to-blue-500 rounded-xl flex items-center justify-center shadow-md">
                  <CloudIcon className="w-7 h-7 text-white" />
                </div>
                <div>
                  <h1 className="text-2xl font-bold text-gray-800">Climatovate</h1>
                  <p className="text-xs text-gray-500">Climate Intelligence Dashboard</p>
                </div>
              </div>
              <button onClick={onSignOut} className="px-5 py-2.5 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm font-medium shadow-sm">Sign Out</button>
            </div>
          </div>
        </header>
        <main className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
          <div className="bg-gradient-to-r from-blue-50 to-indigo-50 border-2 border-blue-200 rounded-xl p-5 mb-6 shadow-sm">
            <div className="flex items-start gap-3">
              <div className="p-2 bg-blue-500 rounded-lg"><UserIcon className="w-5 h-5 text-white" /></div>
              <div className="flex-1">
                <p className="text-sm font-semibold text-blue-900 mb-1">Authenticated User ID</p>
                <p className="font-mono text-xs text-blue-700 break-all bg-white px-3 py-2 rounded-lg border border-blue-200">{userId}</p>
                <p className="text-xs text-blue-600 mt-2">Use this ID for security rule testing and sharing</p>
              </div>
            </div>
          </div>
          <div className="mb-6">
            <Suspense fallback={<div className="bg-white rounded-xl shadow-lg p-8 h-96 flex items-center justify-center"><div className="text-center"><LoaderIcon className="w-12 h-12 text-blue-500 animate-spin mx-auto mb-4" /><p className="text-gray-600">Loading map...</p></div></div>}>
              <LazyGeospatialMap />
            </Suspense>
          </div>
          <div className="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6">
            <CurrentWeatherWidget />
            <div className="lg:col-span-2"><ForecastWidget /></div>
          </div>
          <div className="text-center py-4"><p className="text-sm text-gray-500">Climatovate MVP Sprint 1 - Powered by React</p></div>
        </main>
      </div>
    );

    function App() {
      const [user, setUser] = useState(null);
      const [loading, setLoading] = useState(true);
      const [signingIn, setSigningIn] = useState(false);

      useEffect(() => {
        const savedUser = localStorage.getItem('climatovate_user');
        if (savedUser) setUser(savedUser);
        setLoading(false);
      }, []);

      const handleSignIn = (email) => {
        setSigningIn(true);
        setTimeout(() => {
          const userId = `user_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
          localStorage.setItem('climatovate_user', userId);
          setUser(userId);
          setSigningIn(false);
        }, 1000);
      };

      const handleSignOut = () => { localStorage.removeItem('climatovate_user'); setUser(null); };

      if (loading) return (
        <div className="min-h-screen bg-gradient-to-br from-green-400 via-blue-500 to-purple-600 flex items-center justify-center">
          <div className="text-center">
            <LoaderIcon className="w-16 h-16 text-white animate-spin mx-auto mb-4" />
            <p className="text-white text-2xl font-semibold">Loading Climatovate...</p>
          </div>
        </div>
      );

      return user ? <Dashboard userId={user} onSignOut={handleSignOut} /> : <LoginScreen onSignIn={handleSignIn} loading={signingIn} />;
    }

    ReactDOM.createRoot(document.getElementById('root')).render(<App />);
  </script>
</body>
</html>
